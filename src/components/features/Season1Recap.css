/* ═══════════════════════════════════════════════
   SEASON 1 RECAP

   ═══════════════════════════════════════════════ */

/* Tall wrapper — its height is what drives the scroll progress */
.s1-wrapper {
    position: relative;
    height: 380vh;
    margin-top: -30vh;
    /* Pulled up heavily to eliminate dead space after Hero and WhatIsAlgoStorm */
    padding: 0;
    background: var(--color-background);
}

/* Sticky viewport — sticks while user scrolls through the wrapper */
.s1-sticky {
    position: sticky;
    top: 0;
    width: 100%;
    height: 100vh;
    height: 100svh;
    overflow: hidden;
    background: var(--color-background);
}

/* ═══════════════════════════════════════════════
   IMAGES
   ═══════════════════════════════════════════════ */
.s1-img {
    position: absolute;
    z-index: 4;
    will-change: transform, opacity;
    transform: translateZ(0);
    /* Force GPU layer */
}

.s1-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    background-color: var(--color-background);

    /* User-requested inner-curve mask */
    --r: 20px;
    --s: 40px;
    --a: 20deg;
    --p: 50%;
    border-radius: var(--r);
    --_m: var(--r), #000 calc(100% - 1px), #0000;
    --_d: (var(--s) + var(--r))*cos(var(--a));
    mask:
        radial-gradient(var(--r) at calc(var(--p) + var(--_d)) var(--_m)),
        radial-gradient(var(--r) at calc(var(--p) - var(--_d)) var(--_m)),
        radial-gradient(var(--s) at var(--p) calc(-1*sin(var(--a))*var(--s)),
            #0000 100%, #000 calc(100% + 1px)) 0 calc(var(--r)*(1 - sin(var(--a)))) no-repeat,
        linear-gradient(90deg, #000 calc(var(--p) - var(--_d)), #0000 0 calc(var(--p) + var(--_d)), #000 0);
    -webkit-mask:
        radial-gradient(var(--r) at calc(var(--p) + var(--_d)) var(--_m)),
        radial-gradient(var(--r) at calc(var(--p) - var(--_d)) var(--_m)),
        radial-gradient(var(--s) at var(--p) calc(-1*sin(var(--a))*var(--s)),
            #0000 100%, #000 calc(100% + 1px)) 0 calc(var(--r)*(1 - sin(var(--a)))) no-repeat,
        linear-gradient(90deg, #000 calc(var(--p) - var(--_d)), #0000 0 calc(var(--p) + var(--_d)), #000 0);

    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), filter 0.4s ease;

    /* Money Heist intense cinematic filter */
    filter: grayscale(80%) contrast(1.2) brightness(0.8) sepia(20%);
}

.s1-img:hover img {
    filter: grayscale(0%) contrast(1.1) brightness(1) sepia(0%);
    transform: scale(1.05);
}

/* Positions & Scattered Dossier Rotations */
/* Base styles for the large paired scrolling photos */
.s1-img {
    width: 32vw;
    height: 45vh;
    min-width: 260px;
    max-width: 420px;
    /* Center them vertically in CSS, GSAP handles the huge vertical scroll offsets */
    top: 50%;
    margin-top: -22.5vh;
}

/* ── Pair 1 ── */
.s1-img--1 {
    left: 4%;
}

.s1-img--1 img {
    transform: rotate(4deg);
}

.s1-img--1::after {
    transform: translateX(-50%) rotate(1deg);
}

.s1-img--2 {
    right: 4%;
}

.s1-img--2 img {
    transform: rotate(-5deg);
}

.s1-img--2::after {
    transform: translateX(-50%) rotate(-1deg);
}

/* ── Pair 2 ── */
.s1-img--3 {
    left: 8%;
}

.s1-img--3 img {
    transform: rotate(-6deg);
}

.s1-img--3::after {
    transform: translateX(-50%) rotate(-11deg);
}

.s1-img--4 {
    right: 8%;
}

.s1-img--4 img {
    transform: rotate(7deg);
}

.s1-img--4::after {
    transform: translateX(-50%) rotate(2deg);
}

/* ── Pair 3 ── */
.s1-img--5 {
    left: 2%;
}

.s1-img--5 img {
    transform: rotate(3deg);
}

.s1-img--5::after {
    transform: translateX(-50%) rotate(-2deg);
}

.s1-img--6 {
    right: 2%;
}

.s1-img--6 img {
    transform: rotate(-4deg);
}

.s1-img--6::after {
    transform: translateX(-50%) rotate(1deg);
}

/* Wrapper handles absolute positioning and GSAP animations */
.s1-text-wrap {
    position: absolute;
    inset: 0;
    z-index: 2;
    /* Lower than .s1-img (z-index 4) so images pass OVER the text */
    pointer-events: none;
    will-change: transform, opacity;
}

/* Inner block handles pure layout and glass effects */
.s1-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
    padding: 40px 60px;
    border-radius: var(--radius-lg, 24px);

    /* Intense red-tinted glass plate */
    background: rgba(10, 0, 0, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(229, 9, 20, 0.2);
    border-top: 1px solid rgba(229, 9, 20, 0.4);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.8), inset 0 0 40px rgba(229, 9, 20, 0.05);
}

/* "SEASON 1" tag */
.s1-tag {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--color-primary);
    border: 1px solid rgba(229, 9, 20, 0.35);
    padding: 5px 20px;
    margin-bottom: 16px;
    background: rgba(229, 9, 20, 0.05);
    border-radius: var(--radius-sm);
    position: relative;
}

.s1-tag::before,
.s1-tag::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 36px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(229, 9, 20, 0.45));
}

.s1-tag::before {
    right: 100%;
    margin-right: 8px;
}

.s1-tag::after {
    left: 100%;
    margin-left: 8px;
    transform: scaleX(-1);
}

/* Heading stack */
.s1-headings {
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 0.88;
    gap: 0;
}

.s1-h {
    font-family: 'Bebas Neue', Impact, sans-serif;
    text-transform: uppercase;
    margin: 0;
    color: var(--color-text);
    letter-spacing: 0.05em;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.7);
}

/* Sub-line "HOW'S" — visible but lighter than main headings */
.s1-h--sub {
    font-family: var(--font-primary);
    font-weight: 400;
    font-size: clamp(1rem, 2vw, 1.5rem);
    color: var(--color-text);
    opacity: 0.8;
    letter-spacing: 0.3em;
    margin-bottom: 2px;
}

/* Large "THE" */
.s1-h--lg {
    font-size: clamp(2.2rem, 5vw, 4rem);
}

/* Hero word "JOURNEY" */
.s1-h--hero {
    font-size: clamp(2.6rem, 7vw, 5.5rem);
    display: flex;
    align-items: baseline;
}

.s1-h__stroke {
    color: transparent;
    -webkit-text-stroke: 1.5px var(--color-text);
}

.s1-h__red {
    color: var(--color-primary);
}

/* "SO FAR?" */
.s1-h--md {
    font-size: clamp(1.6rem, 4vw, 2.8rem);
    letter-spacing: 0.18em;
}

.s1-h__q {
    color: var(--color-primary);
    font-size: 1.15em;
    margin-left: 3px;
    display: inline-block;
    animation: s1-pulse 2.5s ease-in-out infinite;
}

@keyframes s1-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.45;
    }
}

/* ── Atmospheric Glow (GPU-friendly opacity only) ── */
.s1-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120%;
    height: 160%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse 60% 50% at 50% 50%,
            rgba(229, 9, 20, 0.18) 0%,
            rgba(229, 9, 20, 0.06) 40%,
            transparent 70%);
    filter: blur(30px);
    z-index: -1;
    pointer-events: none;
    will-change: opacity;
    opacity: 0;
    /* GSAP animates this */
}

/* ═══════════════════════════════════════════════
   DESCRIPTION — flows inside .s1-text
   ═══════════════════════════════════════════════ */
.s1-desc {
    color: rgba(255, 255, 255, 0.9);
    font-family: var(--font-primary);
    font-size: var(--text-base, 1rem);
    /* Larger font size */
    line-height: 1.6;
    max-width: 520px;
    text-align: center;
    will-change: transform, opacity;
    margin-top: 10px;
    padding-top: 20px;
    position: relative;
    /* Subtle custom borders instead of full width */
}

.s1-desc::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 1px;
    background: rgba(255, 255, 255, 0.15);
}

/* ═══════════════════════════════════════════════
   RESPONSIVE (≤ 768px)
   ═══════════════════════════════════════════════ */
@media (max-width: 768px) {
    .s1-wrapper {
        height: 350vh;
        margin-top: -30vh;
        /* Strongly pull up on phones to fix scroll gap */
    }

    .s1-text {
        padding: 24px 20px;
        width: 90%;
    }

    .s1-img {
        width: 40vw !important;
        height: 25vh !important;
        min-width: 140px;
    }

    /* Remove the complex curved mask on phones and use a clean rounded rectangle */
    .s1-img img {
        -webkit-mask-image: none;
        mask-image: none;
        border-radius: 8px;
    }

    /* Keep pairs strictly forced to left and right edges to prevent stacking */
    .s1-img--1 {
        left: 2%;
    }

    .s1-img--2 {
        right: 2%;
    }

    .s1-img--3 {
        left: 5%;
    }

    .s1-img--4 {
        right: 5%;
    }

    .s1-img--5 {
        left: 0%;
    }

    .s1-img--6 {
        right: 0%;
    }

    .s1-h--sub {
        font-size: clamp(0.75rem, 3vw, 1rem);
    }

    .s1-h--lg {
        font-size: clamp(1.6rem, 8vw, 2.8rem);
    }

    .s1-h--hero {
        font-size: clamp(2rem, 10vw, 3.8rem);
    }

    .s1-h--md {
        font-size: clamp(1.1rem, 5vw, 1.8rem);
    }

    .s1-tag {
        font-size: 0.6rem;
        padding: 3px 10px;
    }

    .s1-tag::before,
    .s1-tag::after {
        width: 20px;
    }

    .s1-desc {
        font-size: var(--text-xs);
        max-width: 95%;
        margin-top: 8px;
        padding-top: 20px;
    }
}